---
layout: post
title: "ドメイン取得"
tags : [ブログ]
date: 2012-10-03 21:57:23
---


以前書いた、ドメインについて、ようやく取得して設定したので、まとめておく。
独自ドメインを取得しようと思っている方への助けとなれば。


## ■目的

独自ドメインを取得し、本ブログに設定すること。
本ブログはGoogle App Engineを使って作られているので、
Google Appsによって、独自ドメインを設定することとする。


## ■手順
### 1. 「お名前.com」にて独自ドメインを取得

まず、ドメイン取得には、「お名前.com」を選んだ。
調べたら一番情報が集まりやすかったからだ。
.netドメインを取得し、tavi-travelog.netとした。

.comのほうが有名だし、値段も同じなのでいいかと思ったけど、
元々.comは商用利用を意図としたものなので、
僕個人のブログには合わないと判断し、.netにした。
取得自体はとても簡単。
必要事項を入力して画面の通りに進むだけ。




### 2. Google Appsに申し込む

Google App Engineで作成したアプリを、独自ドメインに割り当てるためには、
Google Appsが必要。
ということで普通に申し込み。

まあ、これも画面の通りに進むだけ。
オプションと書いてある部分以外は全て必須。
なお、申し込みには1で作成したドメイン以外に、Google Apps用のアカウントが必要。
すでにGoogleアカウントを持っている状態であったとしても、
管理者アカウントは別に作成しなければならないと思われる。
僕はそうだった。




### 3. レンタルDNS設定

お名前.comで作成した独自ドメインをGoogle Appsに認識させるために、
先ほど作成したGoogle Appsにおいて、レンタルDNS設定を行う。

一応ドメイン作成プロバイダ（この場合は、お名前.com）毎にやり方が載っているので、
その通りやればだいたい大丈夫。

最後に認識させる手段として、
HTMLを置く方法というのがあったが、別の方法->ドメイン名プロバイダというほうを選択
プロバイダを選択すると、プロバイダに沿ったやり方を教えてくれる。

ここで気をつけてもらいたいのだが、
DNSは変更したらすぐに反映されるわけではないということ。
最大で48時間かかるということだが、
事実、僕の場合、本当に48時間ぐらい待った。
最初、すぐに反映されるものだと思って、、
何度もレンタルDNSレコード設定を変更しちゃったりしてた。
ここはちゃんと待つことが大事。





### 4. ホスト名の設定

ここが一番面倒だった。

レンタルDNS設定により、Google Appsから独自ドメインが見えた。
次に手順として、Google Apps において、Application Settingを選択
Add Domainから、入力し、規約に同意して、
ドメインを有効にすると、新しいURLを追加できる。
ここで、Google App Engineで作成したアプリ(本ブログ)のURLを入力し、完了かと思っていたのだが、
どうやら、ホスト名を必ず指定しないといけないことがわかり、
かなり残念だけど、www.tavi-travelog.netにする。

このようにホスト名を指定しなければいけないのは、
独自ドメインをアプリの割り当てる場合のようだ。

次に、お名前.comのほうで、ホストに対してCNAMEのDNS設定をしたところ、
www.tavi-travelog.netでブログが表示されるようになった！
やったね！


さて、このホスト名でいくべきかどうか。
公開したら、後で変えるのは結構手間だから、どうしようかな。
はっきり言って、無用にURLを長くしたくはなかったが、
どうせつけなければならないなら、wwwでよさそうだ。
一番分かりやすいし。

実はお名前.comやGoogle Appsの機能であるリダイレクト設定を使えば、
ホスト名不要でアクセスできる方法もあるのだが、
・画面タイトルがURLとなってしまう。
・サイト内の何かリンクを押して他のサイトへ遷移する場合でも、
URL欄に表示されるURLは、自分のURLのまま変更されない。
という理由により、僕が望んでいたものではなかったので、選ばなかった。




### 5. 検索エンジンへの登録

長かったけど、4までで、ようやくドメイン設定は完了。

補足として、検索エンジンへの登録についても触れておく。

とりあえず僕個人としてはGoogle一択なのだが、
どうやら、そもそもGoogleの検索エンジン（クローラー）は、
明示的な登録などなくても、ちゃんとWebを巡回し、探してくれるようだ。

しかし、それだとクローラーが巡回してくるまで時間がかかり、
下手すると数ヶ月から数年待つらしいので、
こちらから明示的に「巡回してくださいね」という通知を送る方法がある。

Google Apps のウェブマスターツールというものなのだが、
探してもらいたいURL（この場合、http://www.tavi-travelog.net）を入力して送信するだけで完了。

当然、すぐに巡回に来てくれるわけではないが、
僕の場合２日ほどで、Google検索に表示された。
（もちろん、検索単語は特定できるような単語を入力してね）





## ■まとめ

独自ドメイン取得自体は簡単にできる。
しかし、今回のように、そのドメインをGoogle App Engineなどのサービスに
割り当てる場合は、割と手間がかかる。

また、一つ一つの手順がすぐに反映されないものがあり、
１〜３日待つことも多いので、時間には余裕を持って対応する。
(僕は独自ドメインを取得しようと実際に動いてから、約一週間かかった)

以上、お疲れ様でした。



実は、上には面倒なので書いてないけど、まだ細かい問題がいくつかある。
望んだ通りにできるのは、まだまだ先だ。
